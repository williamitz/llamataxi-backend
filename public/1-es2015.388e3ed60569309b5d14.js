(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{PTPi:function(o,r,e){"use strict";e.r(r),e.d(r,"AuthLayoutModule",(function(){return v}));var n=e("ofXK"),t=e("tyNb"),i=e("3Pt+");class s{constructor(){this.userName="",this.userPassword=""}}var c=e("PSD3"),b=e.n(c),a=e("fXoL"),u=e("lGQG"),l=e("n90K"),d=e("5U9e");function g(o,r){1&o&&(a.Pb(0,"span"),a.Pb(1,"small",29),a.xc(2," *Requerido "),a.Ob(),a.Ob())}function m(o,r){1&o&&(a.Pb(0,"span"),a.Pb(1,"small",29),a.xc(2," *Requerido "),a.Ob(),a.Ob())}function h(o,r){1&o&&(a.Pb(0,"span"),a.Kb(1,"i",30),a.Ob())}const p=function(o,r){return{"is-invalid":o,"is-valid":r}};let P=(()=>{class o{constructor(o,r,e,n){this.authSvc=o,this.storageSvc=r,this.router=e,this.io=n,this.loading=!1}ngOnInit(){this.bodyLogin=new s}onLoginSubmit(o){o.valid&&(this.loading=!0,this.authSvc.onLogin(this.bodyLogin).subscribe(o=>{if(!o.ok)throw new Error(o.error);if(0!==o.showError){const{msg:r}=this.onGetError(o.showError);return b.a.fire({title:"Mensaje al usuario",text:r,icon:"warning"}),void(this.loading=!1)}this.storageSvc.onSaveCredentials(o.token,o.data),this.io.onSingUserSocket().then(()=>{this.loading=!1,this.router.navigateByUrl("/admin")}).catch(o=>{console.error("Error al configurar usuario socket",o)}),console.log(o)}),console.log(this.bodyLogin))}onGetError(o){const r=0===o?"success":"error";let e=0!==o?["Error"]:[""];return 1&o&&(e=["Usuario o contrase\xf1a incorrectos"]),2&o&&(e=["Usuario o contrase\xf1a incorrectos"]),4&o&&e.push("Usuario no verificado"),8&o&&(e=["Acceso restringido","comuniquese con el administrador"]),16&o&&(e=["Acceso restringido","comuniquese con el administrador"]),{css:r,msg:e.join(", ")}}}return o.\u0275fac=function(r){return new(r||o)(a.Jb(u.a),a.Jb(l.a),a.Jb(t.b),a.Jb(d.a))},o.\u0275cmp=a.Db({type:o,selectors:[["app-login"]],decls:43,vars:14,consts:[[1,"row","justify-content-center"],[1,"col-lg-5","col-md-7"],[1,"card","bg-secondary","border-0","mb-0"],[1,"card-body","px-lg-5","py-lg-5"],[1,"text-center","text-muted","mb-4"],["role","form"],["frmLogin","ngForm"],[1,"form-group","mb-3"],[1,"input-group","input-group-merge","input-group-alternative"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"ni","ni-email-83"],["placeholder","Usuario","name","userName","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["userName","ngModel"],[4,"ngIf"],[1,"form-group"],[1,"ni","ni-lock-circle-open"],["type","password","placeholder","Contrase\xf1a","required","","name","userPassword","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["userPss","ngModel"],[1,"custom-control","custom-control-alternative","custom-checkbox"],["id"," customCheckLogin","type","checkbox",1,"custom-control-input"],["for"," customCheckLogin",1,"custom-control-label"],[1,"text-muted"],[1,"text-center"],["type","button",1,"btn","btn-primary","my-4",3,"disabled","click"],[1,"row","mt-3"],[1,"col-6"],["href","#",1,"text-light"],[1,"col-6","text-right"],[1,"text-danger"],[1,"fa","fa-spinner","fa-pulse"]],template:function(o,r){if(1&o){const o=a.Qb();a.Pb(0,"div",0),a.Pb(1,"div",1),a.Pb(2,"div",2),a.Pb(3,"div",3),a.Pb(4,"div",4),a.Pb(5,"small"),a.xc(6,"Iniciar sesi\xf3n"),a.Ob(),a.Ob(),a.Pb(7,"form",5,6),a.Pb(9,"div",7),a.Pb(10,"div",8),a.Pb(11,"div",9),a.Pb(12,"span",10),a.Kb(13,"i",11),a.Ob(),a.Ob(),a.Pb(14,"input",12,13),a.Wb("ngModelChange",(function(o){return r.bodyLogin.userName=o})),a.Ob(),a.Ob(),a.vc(16,g,3,0,"span",14),a.Ob(),a.Pb(17,"div",15),a.Pb(18,"div",8),a.Pb(19,"div",9),a.Pb(20,"span",10),a.Kb(21,"i",16),a.Ob(),a.Ob(),a.Pb(22,"input",17,18),a.Wb("ngModelChange",(function(o){return r.bodyLogin.userPassword=o})),a.Ob(),a.Ob(),a.vc(24,m,3,0,"span",14),a.Ob(),a.Pb(25,"div",19),a.Kb(26,"input",20),a.Pb(27,"label",21),a.Pb(28,"span",22),a.xc(29,"Remember me"),a.Ob(),a.Ob(),a.Ob(),a.Pb(30,"div",23),a.Pb(31,"button",24),a.Wb("click",(function(){a.rc(o);const e=a.qc(8);return r.onLoginSubmit(e)})),a.xc(32," Sign in "),a.vc(33,h,2,0,"span",14),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(34,"div",25),a.Pb(35,"div",26),a.Pb(36,"a",27),a.Pb(37,"small"),a.xc(38,"Forgot password?"),a.Ob(),a.Ob(),a.Ob(),a.Pb(39,"div",28),a.Pb(40,"a",27),a.Pb(41,"small"),a.xc(42,"Create new account"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()}if(2&o){const o=a.qc(8),e=a.qc(15),n=a.qc(23);a.yb(14),a.hc("ngModel",r.bodyLogin.userName)("ngClass",a.mc(8,p,(null==e.errors?null:e.errors.required)&&e.touched,!(null!=e.errors&&e.errors.required)&&e.touched)),a.yb(2),a.hc("ngIf",(null==e.errors?null:e.errors.required)&&e.touched),a.yb(6),a.hc("ngModel",r.bodyLogin.userPassword)("ngClass",a.mc(11,p,(null==n.errors?null:n.errors.required)&&n.touched,!(null!=n.errors&&n.errors.required)&&n.touched)),a.yb(2),a.hc("ngIf",(null==n.errors?null:n.errors.required)&&n.touched),a.yb(7),a.hc("disabled",o.invalid||r.loading),a.yb(2),a.hc("ngIf",r.loading)}},directives:[i.r,i.h,i.i,i.b,i.o,i.g,i.j,n.j,n.l],styles:[""]}),o})();const f=[{path:"",component:P},{path:"**",component:P}];let v=(()=>{class o{}return o.\u0275mod=a.Hb({type:o}),o.\u0275inj=a.Gb({factory:function(r){return new(r||o)},imports:[[n.b,i.c,t.f.forChild(f)]]}),o})()}}]);
//# sourceMappingURL=1-es2015.388e3ed60569309b5d14.js.map